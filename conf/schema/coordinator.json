{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://github.com/oxia-db/oxia/oxiad/coordinator/option/options",
  "$ref": "#/$defs/Options",
  "$defs": {
    "AdminServerOptions": {
      "properties": {
        "bindAddress": {
          "type": "string",
          "format": "hostname",
          "description": "Bind address for the admin API server",
          "examples": [
            "0.0.0.0:6650"
          ]
        },
        "tls": {
          "$ref": "#/$defs/TLSOptions",
          "description": "TLS configuration for securing admin API connections"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "bindAddress"
      ]
    },
    "ClusterOptions": {
      "properties": {
        "configPath": {
          "type": "string",
          "description": "Path to the cluster configuration file",
          "examples": [
            "./configs/cluster.yaml"
          ]
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "configPath"
      ]
    },
    "ControllerOptions": {
      "properties": {
        "tls": {
          "$ref": "#/$defs/TLSOptions",
          "description": "TLS configuration for securing controller communication"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "FileMetadata": {
      "properties": {
        "path": {
          "type": "string",
          "description": "File system path for metadata storage",
          "examples": [
            "./metadata/cluster.json"
          ]
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "path"
      ]
    },
    "InternalServerOptions": {
      "properties": {
        "bindAddress": {
          "type": "string",
          "format": "hostname",
          "description": "Bind address for internal server-to-server communication",
          "examples": [
            "0.0.0.0:6649"
          ]
        },
        "tls": {
          "$ref": "#/$defs/TLSOptions",
          "description": "TLS configuration for securing internal cluster communication"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "bindAddress"
      ]
    },
    "K8sMetadata": {
      "properties": {
        "namespace": {
          "type": "string",
          "description": "Kubernetes namespace for ConfigMap storage",
          "examples": [
            "default"
          ]
        },
        "configMapName": {
          "type": "string",
          "description": "Name of the ConfigMap for metadata storage",
          "examples": [
            "oxia-cluster-metadata"
          ]
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "namespace",
        "configMapName"
      ]
    },
    "LogOptions": {
      "properties": {
        "level": {
          "type": "string",
          "description": "Log level",
          "default": "info",
          "examples": [
            "info"
          ]
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "MetadataOptions": {
      "properties": {
        "providerName": {
          "type": "string",
          "description": "Metadata provider type (memory",
          "examples": [
            "configmap"
          ]
        },
        "kubernetes": {
          "$ref": "#/$defs/K8sMetadata",
          "description": "Kubernetes ConfigMap metadata configuration"
        },
        "file": {
          "$ref": "#/$defs/FileMetadata",
          "description": "File-based metadata configuration"
        },
        "raft": {
          "$ref": "#/$defs/RaftMetadata",
          "description": "Raft-based metadata configuration"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "providerName"
      ]
    },
    "MetricOptions": {
      "properties": {
        "enabled": {
          "type": "boolean",
          "description": "Enable metrics collection",
          "default": true
        },
        "bindAddress": {
          "type": "string",
          "format": "hostname",
          "description": "Bind address for metrics server",
          "examples": [
            "0.0.0.0:8080"
          ]
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "enabled"
      ]
    },
    "ObservabilityOptions": {
      "properties": {
        "metric": {
          "$ref": "#/$defs/MetricOptions",
          "description": "Metric configuration for observability"
        },
        "log": {
          "$ref": "#/$defs/LogOptions",
          "description": "Log configuration for observability"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "Options": {
      "properties": {
        "cluster": {
          "$ref": "#/$defs/ClusterOptions",
          "description": "Cluster configuration settings"
        },
        "server": {
          "$ref": "#/$defs/ServerOptions",
          "description": "Server configuration for admin and internal endpoints"
        },
        "controller": {
          "$ref": "#/$defs/ControllerOptions",
          "description": "Controller configuration for cluster management"
        },
        "metadata": {
          "$ref": "#/$defs/MetadataOptions",
          "description": "Metadata provider configuration"
        },
        "observability": {
          "$ref": "#/$defs/ObservabilityOptions",
          "description": "Observability configuration for metrics and tracing"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "cluster",
        "server",
        "metadata",
        "observability"
      ]
    },
    "RaftMetadata": {
      "properties": {
        "bootstrapNodes": {
          "items": {
            "type": "string"
          },
          "type": "array",
          "description": "List of bootstrap nodes for Raft cluster initialization"
        },
        "address": {
          "type": "string",
          "description": "Address of this node in the Raft cluster",
          "examples": [
            "localhost:8080"
          ]
        },
        "dataDir": {
          "type": "string",
          "description": "Directory for Raft metadata storage",
          "examples": [
            "./data/raft"
          ]
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "bootstrapNodes",
        "address",
        "dataDir"
      ]
    },
    "ServerOptions": {
      "properties": {
        "admin": {
          "$ref": "#/$defs/AdminServerOptions",
          "description": "Admin server configuration for management API endpoints"
        },
        "internal": {
          "$ref": "#/$defs/InternalServerOptions",
          "description": "Internal server configuration for cluster communication"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "admin",
        "internal"
      ]
    },
    "TLSOptions": {
      "properties": {
        "enabled": {
          "type": "boolean",
          "description": "Enable TLS"
        },
        "certFile": {
          "type": "string",
          "description": "Path to TLS certificate file"
        },
        "keyFile": {
          "type": "string",
          "description": "Path to TLS private key file"
        },
        "cipherSuites": {
          "items": {
            "type": "integer"
          },
          "type": "array",
          "description": "List of supported TLS cipher suites"
        },
        "minVersion": {
          "type": "integer",
          "description": "Minimum TLS version"
        },
        "maxVersion": {
          "type": "integer",
          "description": "Maximum TLS version"
        },
        "trustedCaFile": {
          "type": "string",
          "description": "Path to trusted CA certificate file"
        },
        "insecureSkipVerify": {
          "type": "boolean",
          "description": "Skip TLS certificate verification"
        },
        "serverName": {
          "type": "string",
          "description": "Expected server name for SNI"
        },
        "clientAuth": {
          "type": "boolean",
          "description": "Require client certificate authentication"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "enabled"
      ]
    }
  }
}